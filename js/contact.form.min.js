jQuery(document).ready(function ($) {
  "use strict";
  $(function () {
    $("#contact").validate({
      rules: {
        name: {
          required: true,
          minlength: 2,
        },
        surname: {
          required: true,
          minlength: 2,
        },
        email: {
          required: true,
          email: true,
        },
        subject: {
          required: true,
        },
        message: {
          required: true,
        },
      },
      messages: {
        name: {
          required: "Veuillez entrer votre nom",
          minlength: "Veuillez entrer un nom valide (au moins 2 caractères)",
        },
        surname: {
          required: "Veuillez entrer votre prénom",
          minlength: "Veuillez entrer un prénom valide (au moins 2 caractères)",
        },
        email: {
          required: "Veuillez entrer une adresse e-mail valide",
        },
        subject: {
          required: "Veuillez entrer un sujet",
        },
        message: {
          required: "Veuillez entrer un message",
        },
      },
      submitHandler: function (form) {
        // Récupérer les données du formulaire
        var formData = $(form).serialize();

        // Envoyer les données en AJAX
        $.ajax({
          type: "POST",
          url: "endpoint.php", // Remplacez par l'URL de votre fichier PHP
          data: formData,
          dataType: "json", // Attendre une réponse JSON
          success: function (response) {
            if (response.status === "success") {
              // Afficher une notification de succès avec SweetAlert
              Swal.fire({
                icon: "success",
                title: "Succès !",
                text: response.message,
              });

              // Réinitialiser le formulaire (optionnel)
              $("#contact")[0].reset();
            } else if (response.status === "error") {
              // Afficher une notification d'erreur avec SweetAlert
              Swal.fire({
                icon: "error",
                title: "Erreur",
                text: response.message + "\nDétails : " + response.details,
              });
            }
          },
          error: function (xhr, status, error) {
            // Gestion des erreurs AJAX (par exemple, problème de réseau)
            Swal.fire({
              icon: "error",
              title: "Erreur",
              text: "Une erreur est survenue lors de la communication avec le serveur.",
            });
          },
        });
      },
    });
  });
});